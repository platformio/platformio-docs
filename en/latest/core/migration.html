<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Migrating from 5.x to 6.0 &mdash; PlatformIO latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=266695fe" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.platformio.org/core/migration.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=368b3570"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Release Notes" href="history.html" />
 
<link rel="stylesheet" href="../_static/css/extra.css" type="text/css" />
<script src="../_static/js/bootstrap.min.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">

              <ul>
<li class="toctree-l1"><a class="reference internal" href="../what-is-platformio.html">What is PlatformIO?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/ide/pioide.html">PlatformIO IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">PlatformIO Core (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../home/index.html">PlatformIO Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plus/pio-account.html">PlatformIO Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials and Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../projectconf/index.html">platformio.ini</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projectconf/build_configurations.html">Build Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envvars.html">Environment variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Instruments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../librarymanager/index.html">Library Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frameworks/index.html">Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../boards/index.html">Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/custom_platform_and_board.html">Custom Platform &amp; Board</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripting/index.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plus/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/unit-testing/index.html">Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/static-code-analysis/index.html">Static Code Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plus/pio-remote.html">Remote Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/ide/index.html">Cloud &amp; Desktop IDEs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/ci/index.html">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/compile_commands.html">Compilation database <code class="docutils literal notranslate"><span class="pre">compile_commands.json</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Migrating from 5.x to 6.0</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#migration-steps">Migration Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-new">What is new</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#package-management">Package Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#run-package-command">Run package command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtual-symbolic-links">Virtual symbolic links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#unit-testing">Unit Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#test-driven-development">Test-driven development</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware-less-development">Hardware-less development</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-changed-or-removed">What is changed or removed</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dropped-automatic-updates">Dropped automatic updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-interface">Command Line Interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<ins data-rvad-zoneid="7" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PlatformIO</a>
      </nav>

      <div class="wy-nav-content">
<ins data-rvad-zoneid="1" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>

        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Migrating from 5.x to 6.0</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/platformio/platformio-docs/blob/develop/core/migration.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="migrating-from-5-x-to-6-0">
<span id="core-migration"></span><h1>Migrating from 5.x to 6.0<a class="headerlink" href="#migrating-from-5-x-to-6-0" title="Link to this heading"></a></h1>
<p>Guidance on how to upgrade from <a class="reference internal" href="index.html#piocore"><span class="std std-ref">PlatformIO Core (CLI)</span></a> v5.x to v6.x with emphasis on
major changes, what is new, and what has been removed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PlatformIO Core 6.0 is <strong>FULLY BACKWARD COMPATIBLE*</strong> with PlatformIO 5.0 projects.
It means, there are no breaking changes or required migration steps.
Project compatibility between major PlatformIO Core releases is our main task
and part of PlatformIO’s decentralized architecture.</p>
<p>We highly recommend using the latest PlatformIO Core.
See <a class="reference internal" href="userguide/cmd_upgrade.html#cmd-upgrade"><span class="std std-ref">pio upgrade</span></a> command.</p>
<p><code class="docutils literal notranslate"><span class="pre">*</span></code> see a note regarding <a class="reference internal" href="../advanced/unit-testing/index.html#unit-testing"><span class="std std-ref">Unit Testing</span></a> and the grouped test suites
in the migration steps below.</p>
</div>
<p>Please read <a class="reference internal" href="history.html#release-notes-6"><span class="std std-ref">PlatformIO 6.0 Release Notes</span></a> before.</p>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#migration-steps" id="id2">Migration Steps</a></p></li>
<li><p><a class="reference internal" href="#what-is-new" id="id3">What is new</a></p>
<ul>
<li><p><a class="reference internal" href="#package-management" id="id4">Package Management</a></p>
<ul>
<li><p><a class="reference internal" href="#run-package-command" id="id5">Run package command</a></p></li>
<li><p><a class="reference internal" href="#virtual-symbolic-links" id="id6">Virtual symbolic links</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#unit-testing" id="id7">Unit Testing</a></p>
<ul>
<li><p><a class="reference internal" href="#test-driven-development" id="id8">Test-driven development</a></p></li>
<li><p><a class="reference internal" href="#hardware-less-development" id="id9">Hardware-less development</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-is-changed-or-removed" id="id10">What is changed or removed</a></p>
<ul>
<li><p><a class="reference internal" href="#dropped-automatic-updates" id="id11">Dropped automatic updates</a></p></li>
<li><p><a class="reference internal" href="#command-line-interface" id="id12">Command Line Interface</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="migration-steps">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Migration Steps</a><a class="headerlink" href="#migration-steps" title="Link to this heading"></a></h2>
<p><strong>PlatformIO Core 6.0</strong> received a lot of new features and updates to improve the
lives of everyday engineers. To benefit from its improvements, we recommend
taking into account the following steps:</p>
<ol class="arabic">
<li><p>Replace deprecated <a class="reference internal" href="userguide/lib/index.html#cmd-lib"><span class="std std-ref">pio lib</span></a>, <a class="reference internal" href="userguide/platforms/index.html#cmd-platform"><span class="std std-ref">pio platform</span></a>,
and <a class="reference internal" href="userguide/cmd_update.html#cmd-update"><span class="std std-ref">pio update</span></a> commands with the unified <a class="reference internal" href="userguide/pkg/index.html#cmd-pkg"><span class="std std-ref">Package Management CLI</span></a></p></li>
<li><p>Avoid using global libraries previously installed using the <a class="reference internal" href="userguide/lib/index.html#cmdoption-pio-lib-g"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">lib</span> <span class="pre">--global</span></code></a>
command. Ensure that the <a class="reference internal" href="../projectconf/sections/platformio/options/directory/globallib_dir.html#projectconf-pio-globallib-dir"><span class="std std-ref">globallib_dir</span></a> folder is empty.
Please use a declarative approach for the safety-critical embedded development
and declare project dependencies using the <a class="reference internal" href="../projectconf/sections/env/options/library/lib_deps.html#projectconf-lib-deps"><span class="std std-ref">lib_deps</span></a> option</p></li>
<li><p>Ensure that project dependencies are declared using the <a class="reference internal" href="../projectconf/sections/env/options/platform/platform.html#projectconf-env-platform"><span class="std std-ref">platform</span></a>,
<a class="reference internal" href="../projectconf/sections/env/options/platform/platform_packages.html#projectconf-env-platform-packages"><span class="std std-ref">platform_packages</span></a>, and <a class="reference internal" href="../projectconf/sections/env/options/library/lib_deps.html#projectconf-lib-deps"><span class="std std-ref">lib_deps</span></a> options
in <a class="reference internal" href="../projectconf/index.html#projectconf"><span class="std std-ref">“platformio.ini” (Project Configuration File)</span></a>:</p>
<ol class="loweralpha simple">
<li><p>meet the updated <a class="reference internal" href="userguide/pkg/cmd_install.html#cmd-pkg-install-specifications"><span class="std std-ref">Package Specifications</span></a></p></li>
<li><p>use recommended Semantic <a class="reference internal" href="userguide/pkg/cmd_install.html#cmd-pkg-install-requirements"><span class="std std-ref">Version Requirements</span></a>
(check <a class="reference external" href="https://registry.platformio.org">PlatformIO Registry</a> for the available package versions)</p></li>
</ol>
<p><strong>Bad practice</strong> (not recommended)</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[env:myenv]</span>
<span class="c1">; Depend on ANY/Latest version of the development platform</span>
<span class="c1">; allowing breaking changes</span>
<span class="na">platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">platformio/espressif32</span>

<span class="na">lib_deps</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="c1">; Omit library package owner (&lt;owner&gt;/&lt;name&gt;) and depend on the library by name.</span>
<span class="w">  </span><span class="c1">; Lead to the conflicts when there are multiple libraries with the same name</span>
<span class="w">  </span><span class="na">OneWire</span>

<span class="w">  </span><span class="c1">; Depend on ANY/Latest version of the development platform</span>
<span class="w">  </span><span class="c1">; allowing breaking changes</span>
<span class="w">  </span><span class="na">me-no-dev/AsyncTCP</span>

<span class="w">  </span><span class="c1">; Depend on the development branch of the Git repository,</span>
<span class="w">  </span><span class="c1">; allow breaking changes, and untested commits</span>
<span class="w">  </span><span class="na">https</span><span class="o">:</span><span class="s">//github.com/username/HelloWorld.git</span>
</pre></div>
</div>
<p><strong>Good practice</strong> (highly recommended)</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[env:myenv]</span>
<span class="c1">; Depend on the latest compatible version of development platform</span>
<span class="c1">; allowing new functionality (backward-compatible), and bug fixes.</span>
<span class="c1">; No breaking changes</span>
<span class="c1">; FYI: ^4 == ^4.0.0 == (&gt;=4.0.0, &lt;5.0.0)</span>
<span class="na">platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">platformio/espressif32 @ ^4</span>

<span class="na">lib_deps</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="c1">; Depend on the latest 6.x stable version of ArduinoJson.</span>
<span class="w">  </span><span class="c1">; The minimum required version is 6.19.4.</span>
<span class="w">  </span><span class="c1">; New functionality (backward-compatible) and bug-fixed are allowed</span>
<span class="w">  </span><span class="na">bblanchon/ArduinoJson @ ^6.19.4</span>

<span class="w">  </span><span class="c1">; Depend on the exact 1.1.1 version</span>
<span class="w">  </span><span class="c1">; No new functionality (backward-compatible) or bug fixes.</span>
<span class="w">  </span><span class="c1">; Recommended for safety-critical projects</span>
<span class="w">  </span><span class="na">me-no-dev/AsyncTCP @ 1.1.1</span>

<span class="w">  </span><span class="c1">; Depend on the particular tag (v2.13) of a Git repository</span>
<span class="w">  </span><span class="na">https</span><span class="o">:</span><span class="s">//github.com/username/HelloWorld.git</span><span class="c1">#v2.13</span>
</pre></div>
</div>
</li>
<li><p>If you use a custom testing transport via the “test_transport” option
in <a class="reference internal" href="../projectconf/index.html#projectconf"><span class="std std-ref">“platformio.ini” (Project Configuration File)</span></a>, please align your codebase with
<a class="reference internal" href="../advanced/unit-testing/frameworks/unity.html#unit-testing-frameworks-unity-custom-config"><span class="std std-ref">Custom unity_config.h</span></a>. The
“test_transport” option has been removed.</p></li>
<li><p>There is a known bug in PlatformIO Core 5.0 when Unit Testing didn’t handle
correctly grouped test suites. Please ensure that a test suite folder that
contains test source files is prefixed with <code class="docutils literal notranslate"><span class="pre">test_</span></code>.
See <a class="reference internal" href="../advanced/unit-testing/structure/hierarchy.html#unit-testing-test-hierarchy"><span class="std std-ref">Test Hierarchy</span></a> for details.</p></li>
</ol>
</section>
<section id="what-is-new">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">What is new</a><a class="headerlink" href="#what-is-new" title="Link to this heading"></a></h2>
<p>In this section, we are going to highlight the most important changes and
features introduced in <strong>PlatformIO Core 6.0</strong>. Please visit
<a class="reference internal" href="history.html#release-notes-6"><span class="std std-ref">PlatformIO 6.0 Release Notes</span></a> for more detailed information.</p>
<section id="package-management">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Package Management</a><a class="headerlink" href="#package-management" title="Link to this heading"></a></h3>
<p><strong>PlatformIO Core 6.0</strong> brings a powerful solution to manage different
<a class="reference internal" href="userguide/pkg/cmd_install.html#cmd-pkg-install-types"><span class="std std-ref">Package Types</span></a> using the unified <a class="reference internal" href="userguide/pkg/index.html#cmd-pkg"><span class="std std-ref">Package Management CLI</span></a>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="userguide/pkg/cmd_install.html#cmd-pkg-install"><span class="std std-ref">pio pkg install</span></a> - install the project dependencies or custom packages</p></li>
<li><p><a class="reference internal" href="userguide/pkg/cmd_list.html#cmd-pkg-list"><span class="std std-ref">pio pkg list</span></a> - list installed packages</p></li>
<li><p><a class="reference internal" href="userguide/pkg/cmd_outdated.html#cmd-pkg-outdated"><span class="std std-ref">pio pkg outdated</span></a> - check for project outdated packages</p></li>
<li><p><a class="reference internal" href="userguide/pkg/cmd_search.html#cmd-pkg-search"><span class="std std-ref">pio pkg search</span></a> - search for packages</p></li>
<li><p><a class="reference internal" href="userguide/pkg/cmd_show.html#cmd-pkg-show"><span class="std std-ref">pio pkg show</span></a> - show package information</p></li>
<li><p><a class="reference internal" href="userguide/pkg/cmd_uninstall.html#cmd-pkg-uninstall"><span class="std std-ref">pio pkg uninstall</span></a> uninstall the project dependencies or custom packages</p></li>
<li><p><a class="reference internal" href="userguide/pkg/cmd_update.html#cmd-pkg-update"><span class="std std-ref">pio pkg update</span></a> - update the project dependencies or custom packages.</p></li>
</ul>
<p>There are no more global packages that could lead to potential issues.
The new package management solution allows you to use a modern declarative approach
for safety-critical embedded development. Using the Semantic <a class="reference internal" href="userguide/pkg/cmd_install.html#cmd-pkg-install-requirements"><span class="std std-ref">Version Requirements</span></a>
guarantees the full project reproducibility on any supported host machine for decades.</p>
<p>The new <a class="reference internal" href="userguide/pkg/index.html#cmd-pkg"><span class="std std-ref">Package Management CLI</span></a> operates in accordance with the active (working) project.
The <a class="reference internal" href="userguide/pkg/cmd_install.html#cmd-pkg-install"><span class="std std-ref">pio pkg install</span></a> command will install all required project dependencies.
The <a class="reference internal" href="userguide/pkg/cmd_list.html#cmd-pkg-list"><span class="std std-ref">pio pkg list</span></a> commmand allows listing not only dependent libraries
but also development platforms and their packages.</p>
<p>The notable addition is the <a class="reference internal" href="userguide/pkg/cmd_outdated.html#cmd-pkg-outdated"><span class="std std-ref">pio pkg outdated</span></a> command. It allows you to
check for outdated project packages and list version information for all
dependencies. There are three color legends to help you easily identify
which updates are backward-incompatible.</p>
<section id="run-package-command">
<h4><a class="toc-backref" href="#id5" role="doc-backlink">Run package command</a><a class="headerlink" href="#run-package-command" title="Link to this heading"></a></h4>
<p><a class="reference external" href="https://registry.platformio.org">PlatformIO Registry</a> contains a rich set of popular toolchains and other useful tools.
The <a class="reference internal" href="userguide/pkg/cmd_exec.html#cmd-pkg-exec"><span class="std std-ref">pio pkg exec</span></a> command allows you to run an arbitrary command from the specified
package. If you specify package requirements using the <a class="reference internal" href="userguide/pkg/cmd_exec.html#cmdoption-pio-pkg-exec-p"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">pkg</span> <span class="pre">exec</span> <span class="pre">--package</span></code></a>
option, PlatformIO will ensure that the package is installed before running any command.</p>
<p>Practical use cases include running debugging servers, uploaders or
special tools from a toolchain. A few examples of how to leverage the
new <a class="reference internal" href="userguide/pkg/cmd_exec.html#cmd-pkg-exec"><span class="std std-ref">pio pkg exec</span></a> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ensure JLink tool is installed and start GDB server</span>
&gt;<span class="w"> </span>pio<span class="w"> </span>pkg<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--package<span class="o">=</span>tool-jlink<span class="w"> </span>--<span class="w"> </span>JLinkGDBServer<span class="w"> </span>-singlerun<span class="w"> </span>-if<span class="w"> </span>JTAG<span class="w"> </span>-select<span class="w"> </span>USB<span class="w"> </span>-jtagconf<span class="w"> </span>-1,-1<span class="w"> </span>-device<span class="w"> </span>EFR32BG22CxxxF512<span class="w"> </span>-port<span class="w"> </span><span class="m">2331</span>

<span class="c1"># Run Espressif SoC serial bootloader utility and erase a flash from the target device</span>
&gt;<span class="w"> </span>pio<span class="w"> </span>pkg<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--<span class="w"> </span>esptool.py<span class="w"> </span>erase_flash

<span class="c1"># Disassembly AVR ELF file</span>
&gt;<span class="w"> </span>pio<span class="w"> </span>pkg<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--<span class="w"> </span>avr-objdump<span class="w"> </span>-d<span class="w"> </span>-m<span class="w"> </span>avr2<span class="w"> </span>.pio/build/uno/firmware.elf
</pre></div>
</div>
</section>
<section id="virtual-symbolic-links">
<h4><a class="toc-backref" href="#id6" role="doc-backlink">Virtual symbolic links</a><a class="headerlink" href="#virtual-symbolic-links" title="Link to this heading"></a></h4>
<p>The most requested feature from the library maintainers was the ability to link
the existing package with the project without hard copying (duplicating). As a
workaround, developers used a Unix-native symlink solution and hence it was
not possible to declare a symlinked dependency in the <a class="reference internal" href="../projectconf/index.html#projectconf"><span class="std std-ref">“platformio.ini” (Project Configuration File)</span></a>.</p>
<p>The <a class="reference internal" href="index.html#piocore"><span class="std std-ref">PlatformIO Core (CLI)</span></a> 6.0 introduces cross-platform virtual symbolic links without
any dependencies on the host OS. PlatformIO <code class="docutils literal notranslate"><span class="pre">symlink://</span></code> resources do not
require any specific OS permissions. They are portable between different
host machines.</p>
<p>See <a class="reference internal" href="userguide/pkg/cmd_install.html#cmd-pkg-install-specifications"><span class="std std-ref">Package Specifications</span></a> for “Local Folder”.</p>
</section>
</section>
<section id="unit-testing">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Unit Testing</a><a class="headerlink" href="#unit-testing" title="Link to this heading"></a></h3>
<p>It’s been <a class="reference external" href="https://github.com/platformio/platformio-core/commit/bb22a1297bc2e4c3131530f15a2b4b3914836560">six years</a>
since we added support for unit testing, and Unity was the only available testing framework.
We didn’t expect that the PlatformIO <a class="reference internal" href="../advanced/unit-testing/index.html#unit-testing"><span class="std std-ref">Unit Testing</span></a> solution will gain broad
popularity, especially when it comes to using it on native (host) machines.</p>
<p>So, the time has come to refresh our view on PlatformIO Unit Testing with taking into account
<a class="reference external" href="https://github.com/platformio/platformio-core/issues?q=is%3Aissue+label%3A%22unit+testing%22+is%3Aclosed+milestone%3A6.0">your feedback and feature requests</a>.</p>
<section id="test-driven-development">
<h4><a class="toc-backref" href="#id8" role="doc-backlink">Test-driven development</a><a class="headerlink" href="#test-driven-development" title="Link to this heading"></a></h4>
<p>The PlatformIO Core 6.0 introduces an absolutely a new workflow for
<a class="reference external" href="https://en.wikipedia.org/wiki/Test-driven_development">test-driven development</a>
in the embedded systems industry.
Thanks to the rich set of supported <a class="reference internal" href="../advanced/unit-testing/frameworks/index.html#unit-testing-frameworks"><span class="std std-ref">Testing Frameworks</span></a> and the ability
to organize tests in groups using the <a class="reference internal" href="../advanced/unit-testing/structure/hierarchy.html#unit-testing-test-hierarchy"><span class="std std-ref">Test Hierarchy</span></a>, you can create
hybrid projects and benefit from multiple testing frameworks depending on the project
requirements simultaneously. See a simple example of the hybrid configuration:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[env:native]</span>
<span class="na">platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">native</span>
<span class="na">test_framework</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">googletest</span>
<span class="na">test_filter</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">common/*</span>
<span class="w">  </span><span class="na">native/*</span>

<span class="k">[env:embedded]</span>
<span class="na">platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">...</span>
<span class="na">framework</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">...</span>
<span class="na">test_framework</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">unity</span>
<span class="na">test_filter</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">common/*</span>
<span class="w">  </span><span class="na">embedded/*</span>
</pre></div>
</div>
<p>Use more advanced C++ testing frameworks with Mocking support such as
<a class="reference internal" href="../advanced/unit-testing/frameworks/googletest.html#unit-testing-frameworks-googletest"><span class="std std-ref">GoogleTest</span></a> in pair with the <a class="reference internal" href="../platforms/native.html#platform-native"><span class="std std-ref">Native</span></a>
development platform to run desktop tests on the host machine and a lightweight
framework, such as <a class="reference internal" href="../advanced/unit-testing/frameworks/unity.html#unit-testing-frameworks-unity"><span class="std std-ref">Unity</span></a>, for running tests on
the target embedded device with constrained resources.</p>
</section>
<section id="hardware-less-development">
<h4><a class="toc-backref" href="#id9" role="doc-backlink">Hardware-less development</a><a class="headerlink" href="#hardware-less-development" title="Link to this heading"></a></h4>
<p>It’s hard to imagine today a next-gen project development workflow that does
not benefit from <a class="reference internal" href="../integration/ci/index.html#ci"><span class="std std-ref">Continuous Integration</span></a> systems. PlatformIO already provides multiple
solutions to improve code quality including <a class="reference internal" href="../advanced/static-code-analysis/index.html#check"><span class="std std-ref">Static Code Analysis</span></a>. In addition to
the testing frameworks that allow you to mock objects and simulate the
behavior of real objects, the PlatformIO Core 6.0 adds support for the
<a class="reference internal" href="../advanced/unit-testing/simulators/index.html#unit-testing-simulators"><span class="std std-ref">Simulators</span></a>.</p>
<p>The combination of simulation tools and testing frameworks allow you to
simulate hardware systems and run unit tests in virtual environments.
Simulators can significantly accelerate project development, especially
when used in pair with <a class="reference internal" href="../integration/ci/index.html#ci"><span class="std std-ref">Continuous Integration</span></a>.</p>
<p>Integration of any simulator tool to the PlatformIO <a class="reference internal" href="../advanced/unit-testing/index.html#unit-testing"><span class="std std-ref">Unit Testing</span></a>
is very simple and does not require any extra software or code writing.
Please take a look at the example below how easy it is to integrate
the <a class="reference internal" href="../advanced/unit-testing/simulators/renode.html#unit-testing-simulators-renode"><span class="std std-ref">Renode</span></a> simulation framework:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[env:hifive1-revb]</span>
<span class="na">platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">sifive</span>
<span class="na">framework</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">zephyr</span>
<span class="na">board</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">hifive1-revb</span>

<span class="na">platform_packages</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">platformio/tool-renode</span>
<span class="na">test_testing_command</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">${platformio.packages_dir}/tool-renode/renode</span>
<span class="w">    </span><span class="na">--disable-xwt</span>
<span class="w">    </span><span class="na">-e include @scripts/single-node/sifive_fe310.resc</span>
<span class="w">    </span><span class="na">-e showAnalyzer uart1</span>
<span class="w">    </span><span class="na">-e sysbus LoadELF @${platformio.build_dir}/${this.__env__}/firmware.elf</span>
<span class="w">    </span><span class="na">-e start</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="what-is-changed-or-removed">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">What is changed or removed</a><a class="headerlink" href="#what-is-changed-or-removed" title="Link to this heading"></a></h2>
<section id="dropped-automatic-updates">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Dropped automatic updates</a><a class="headerlink" href="#dropped-automatic-updates" title="Link to this heading"></a></h3>
<p>Thanks to your feedback, we finally removed automatic updates of global libraries
and development platforms. Please use <a class="reference internal" href="userguide/pkg/cmd_outdated.html#cmd-pkg-outdated"><span class="std std-ref">pio pkg outdated</span></a> to check for outdated
project packages and list version information for all dependencies.</p>
<p>The <a class="reference internal" href="userguide/pkg/cmd_update.html#cmd-pkg-update"><span class="std std-ref">pio pkg update</span></a> is intended to update the project dependencies,
custom packages from the <a class="reference external" href="https://registry.platformio.org">PlatformIO Registry</a>, or external sources.</p>
</section>
<section id="command-line-interface">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Command Line Interface</a><a class="headerlink" href="#command-line-interface" title="Link to this heading"></a></h3>
<p>The following commands have been changed in v6.0.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="userguide/pkg/index.html#cmd-pkg"><span class="std std-ref">pio pkg</span></a></p></td>
<td><p><strong>NEW</strong> Unified package management solution</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="userguide/project/cmd_init.html#cmd-project-init"><span class="std std-ref">pio project init</span></a></p></td>
<td><p><strong>NEW</strong> <a class="reference internal" href="userguide/project/cmd_init.html#cmdoption-pio-project-init-no-install-dependencies"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">project</span> <span class="pre">init</span> <span class="pre">--no-install-dependencies</span></code></a> option</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="userguide/project/cmd_metadata.html#cmd-project-metadata"><span class="std std-ref">pio project metadata</span></a></p></td>
<td><p><strong>NEW</strong> <a class="reference internal" href="userguide/project/cmd_metadata.html#cmdoption-pio-project-metadata-json-output-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">project</span> <span class="pre">metadata</span> <span class="pre">--json-output-path</span></code></a> option</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="userguide/cmd_run.html#cmd-run"><span class="std std-ref">pio run</span></a></p></td>
<td><p><strong>NEW</strong> <a class="reference internal" href="userguide/cmd_run.html#cmdoption-pio-run-a"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">run</span> <span class="pre">--program-arg</span></code></a> option</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="userguide/cmd_test.html#cmd-test"><span class="std std-ref">pio test</span></a></p></td>
<td><p><strong>NEW</strong> <a class="reference internal" href="userguide/cmd_test.html#cmdoption-pio-test-a"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">test</span> <span class="pre">--program-arg</span></code></a>, <a class="reference internal" href="userguide/cmd_test.html#cmdoption-pio-test-json-output-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">test</span> <span class="pre">--json-output-path</span></code></a>,
<a class="reference internal" href="userguide/cmd_test.html#cmdoption-pio-test-junit-output-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">test</span> <span class="pre">--junit-output-path</span></code></a>, and <a class="reference internal" href="userguide/cmd_test.html#cmdoption-pio-test-list-tests"><code class="xref std std-option docutils literal notranslate"><span class="pre">pio</span> <span class="pre">test</span> <span class="pre">--list-tests</span></code></a> options</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pio</span> <span class="pre">project</span> <span class="pre">data</span></code></p></td>
<td><p><strong>RENAMED</strong> to the <a class="reference internal" href="userguide/project/cmd_metadata.html#cmd-project-metadata"><span class="std std-ref">pio project metadata</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="userguide/lib/index.html#cmd-lib"><span class="std std-ref">pio lib</span></a></p></td>
<td><p><strong>DEPRECATED</strong> in favor of <a class="reference internal" href="userguide/pkg/index.html#cmd-pkg"><span class="std std-ref">Package Management CLI</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="userguide/platforms/index.html#cmd-platform"><span class="std std-ref">pio platform</span></a></p></td>
<td><p><strong>DEPRECATED</strong> in favor of <a class="reference internal" href="userguide/pkg/index.html#cmd-pkg"><span class="std std-ref">Package Management CLI</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="userguide/cmd_update.html#cmd-update"><span class="std std-ref">pio update</span></a></p></td>
<td><p><strong>DEPRECATED</strong> in favor of <a class="reference internal" href="userguide/pkg/index.html#cmd-pkg"><span class="std std-ref">Package Management CLI</span></a></p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="history.html" class="btn btn-neutral float-left" title="Release Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">

    <p>&#169; Copyright 2014-present, PlatformIO.</p>
<ins data-rvad-zoneid="8" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>

  </div>

  
 
<script>
  var navBarHTML = '\
<div>\
  <div class="container container-fluid">\
    <div class="navbar-header">\
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navBarCollapse" aria-expanded="false">\
        <span class="sr-only">Toggle navigation</span>\
        <span class="icon-bar"></span>\
        <span class="icon-bar"></span>\
        <span class="icon-bar"></span>\
      </button>\
      <a class="navbar-brand" href="https://platformio.org" title="PlatformIO"></a>\
    </div>\
    <nav role="navigation" class="collapse navbar-collapse" id="navBarCollapse">\
      <div>\
        <ul class="nav navbar-nav">\
          <li class="dropdown">\
            <a role="button" data-target="#" href="https://platformio.org/platformio-ide" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Get Started<span class="caret"></span>\
            </a>\
            <ul class="dropdown-menu" role="menu">\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/what-is-platformio.html"><i class="fa fa-heart"></i>What is PlatformIO?</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://platformio.org/platformio-ide"><i class="fa fa-cube"></i>PlatformIO IDE</a></li>\
              <li role="menuitem"><a href="https://platformio.org/install/cli"><i class="fa fa-cogs"></i>PlatformIO Core (CLI)</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/librarymanager/index.html"><i class="fa fa-code"></i>Library Management</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/tutorials/index.html" target="_blank"><i class="fa fa-graduation-cap"></i>Tutorials</a></li>\
              <li role="menuitem"><a href="https://github.com/platformio/platformio-examples" target="_blank"><i class="fa fa-graduation-cap"></i>Project Examples</a></li>\
            </ul>\
          </li>\
          <li class="dropdown">\
            <a role="button" data-target="#" href="https://docs.platformio.org/en/latest/plus/pio-remote.html" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Solutions<span class="caret"></span>\
            </a>\
            <ul class="dropdown-menu" role="menu">\
              <li role="menuitem"><a href="https://platformio.org/platformio-ide"><i class="fa fa-cube"></i>PlatformIO IDE</a></li>\
              <li role="menuitem"><a href="https://platformio.org/install/cli"><i class="fa fa-cogs"></i>PlatformIO Core (CLI)</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/plus/debugging.html"><i class="fa fa-bug"></i>Debugging</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/advanced/unit-testing/index.html"><i class="fa fa-puzzle-piece"></i>Unit Testing</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/plus/pio-check.html"><i class="fa fa-check-circle-o"></i>Static Code Analysis</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/plus/pio-remote.html"><i class="fa fa-globe"></i>Remote Development</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/librarymanager/index.html"><i class="fa fa-code"></i>Library Management</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://platformio.org/install/integration"><i class="fa fa-cube"></i>Desktop IDEs Integration</a></li>\
              <li role="menuitem"><a href="https://platformio.org/install/integration"><i class="fa fa-cloud"></i>Cloud IDEs Integration</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/ci/index.html"><i class="fa fa-refresh"></i>Continuous Integration</a></li>\
            </ul>\
          </li>\
          <li><a href="https://registry.platformio.org/">Registry</a></li>\
        </ul>\
        <ul class="nav navbar-nav navbar-right">\
          <li class="active"><a href="https://docs.platformio.org">Docs</a></li>\
          <li><a href="https://community.platformio.org/">Community</a></li>\
          <li><a href="https://platformio.org/support">Support</a></li>\
          <li class="nav-pio-tech"><a href="https://piolabs.com/"><i class="fa fa-rocket fa-lg"></i> TECHNOLOGY</a></li>\
        </ul>\
      </div>\
    </nav>\
  </div>\
</div>';

  (function() {
    if (window.location.href.indexOf('http://') === 0) {
      location.href = 'https:' + window.location.href.substring(5);
    }

    var topBanner = jQuery('.top-banner');
    var navBar = document.createElement('header');
    navBar.className = 'navbar navbar-inverse';
    navBar.innerHTML = navBarHTML;
    if (topBanner.length) {
      jQuery(navBar).insertAfter(topBanner)
    } else {
      document.body.insertBefore(navBar, document.body.firstChild);
    }

    if (jQuery(window).width() <= 768) {
      return;
    }

    var topOffset = 50;
    if (topBanner.length) {
      topOffset += jQuery('.navbar').offset().top;
    }
    jQuery('.wy-nav-side').css('top', topOffset + 'px');
    jQuery(window).scroll(function() {
      jQuery('.wy-nav-side').css('top', jQuery(window).scrollTop() > topOffset ? 0 : topOffset + 'px');
    });
  })();
</script>
<ins data-rvad-zoneid="11" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>
<script async src="https://ad.platformio.org/delivery/revasyncjs.dll"></script>


</footer>
        </div>

      </div>
    </section>
  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation</span>
    v6.1.16b1 (latest)
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="/en/">latest</a></dd>
      
        <dd><a href="/en/stable/">stable</a></dd>
      
    </dl>
    <dl>
      <dt>On Github</dt>
        <dd><a href="https://github.com/platformio/platformio-docs/blob/develop/core/migration.rst"> View</a></dd>
        <dd><a href="https://github.com/platformio/platformio-docs/edit/develop/core/migration.rst"> Edit</a></dd>
    </dl>
    <dl>
      <dt>Search</dt>
        <dd>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LQZCKGZE94"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-LQZCKGZE94', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>