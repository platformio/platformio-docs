

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LQZCKGZE94"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-LQZCKGZE94');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arduino and Nordic nRF52-DK: debugging and unit testing &mdash; PlatformIO latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=3ba690ee" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.platformio.org/tutorials/nordicnrf52/arduino_debugging_unit_testing.html" />
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2dc8ea38"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Zephyr and Nordic nRF52-DK: debugging, unit testing, project analysis" href="zephyr_debugging_unit_testing_inspect.html" />
    <link rel="prev" title="STM32Cube HAL and Nucleo-F401RE: debugging and unit testing" href="../ststm32/stm32cube_debugging_unit_testing.html" />
 
<link rel="stylesheet" href="../../_static/css/extra.css" type="text/css" />
<script src="../../_static/js/bootstrap.min.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">

              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../what-is-platformio.html">What is PlatformIO?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../integration/ide/pioide.html">PlatformIO IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/index.html">PlatformIO Core (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../home/index.html">PlatformIO Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plus/pio-account.html">PlatformIO Account</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials and Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#official">Official</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#id1">Tutorials</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../espressif32/arduino_debugging_unit_testing.html">Get started with Arduino and ESP32-DevKitC: debugging and unit testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../espressif32/espidf_debugging_unit_testing_analysis.html">Get started with ESP-IDF and ESP32-DevKitC: debugging, unit testing, project analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ststm32/stm32cube_debugging_unit_testing.html">STM32Cube HAL and Nucleo-F401RE: debugging and unit testing</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Arduino and Nordic nRF52-DK: debugging and unit testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="zephyr_debugging_unit_testing_inspect.html">Zephyr and Nordic nRF52-DK: debugging, unit testing, project analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/unit_testing_blink.html">Unit Testing of a “Blink” Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../riscv/riscv_asm_video_tutorial.html">RISC-V ASM Video Tutorial</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#project-examples">Project Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#community">Community</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../projectconf/index.html">platformio.ini</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projectconf/build_configurations.html">Build Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../envvars.html">Environment Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Instruments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../librarymanager/index.html">Library Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frameworks/index.html">Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/custom_platform_and_board.html">Custom Platform &amp; Board</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scripting/index.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plus/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/unit-testing/index.html">Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/static-code-analysis/index.html">Static Code Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plus/pio-remote.html">Remote Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/ide/index.html">Cloud &amp; Desktop IDEs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/ci/index.html">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/compile_commands.html">Compilation database <code class="docutils literal notranslate"><span class="pre">compile_commands.json</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/history.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/migration.html">Migrating from 5.x to 6.0</a></li>
</ul>

<ins data-rvad-zoneid="7" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PlatformIO</a>
      </nav>

      <div class="wy-nav-content">
<ins data-rvad-zoneid="1" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>

        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Tutorials and Examples</a></li>
      <li class="breadcrumb-item active">Arduino and Nordic nRF52-DK: debugging and unit testing</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/platformio/platformio-docs/blob/develop/tutorials/nordicnrf52/arduino_debugging_unit_testing.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="arduino-and-nordic-nrf52-dk-debugging-and-unit-testing">
<span id="tutorial-nordicnrf52-arduino-debugging-unit-testing"></span><h1>Arduino and Nordic nRF52-DK: debugging and unit testing<a class="headerlink" href="#arduino-and-nordic-nrf52-dk-debugging-and-unit-testing" title="Link to this heading"></a></h1>
<p>The goal of this tutorial is to demonstrate how simple it is to use <a class="reference internal" href="../../integration/ide/vscode.html#ide-vscode"><span class="std std-ref">PlatformIO IDE for VSCode</span></a> to develop, run and debug a simple project with <a class="reference internal" href="../../frameworks/arduino.html#framework-arduino"><span class="std std-ref">Arduino</span></a> framework for <code class="docutils literal notranslate"><span class="pre">Nordic</span> <span class="pre">nRF52-DK</span></code> board.</p>
<ul class="simple">
<li><p><strong>Level:</strong> Beginner</p></li>
<li><p><strong>Platforms:</strong> Windows, Mac OS X, Linux</p></li>
</ul>
<p><strong>Requirements:</strong></p>
<ul class="simple">
<li><p>Downloaded and installed <a class="reference internal" href="../../integration/ide/vscode.html#ide-vscode"><span class="std std-ref">PlatformIO IDE for VSCode</span></a></p></li>
<li><p>Install drivers for <a class="reference internal" href="../../plus/debug-tools/jlink.html#debugging-tool-jlink"><span class="std std-ref">J-LINK</span></a> debug tool</p></li>
<li><p><a class="reference internal" href="../../boards/nordicnrf52/nrf52_dk.html#board-nordicnrf52-nrf52-dk"><span class="std std-ref">Nordic nRF52-DK</span></a> development board</p></li>
</ul>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#setting-up-the-project" id="id1">Setting Up the Project</a></p></li>
<li><p><a class="reference internal" href="#adding-code-to-the-generated-project" id="id2">Adding Code to the Generated Project</a></p></li>
<li><p><a class="reference internal" href="#compiling-and-uploading-the-firmware" id="id3">Compiling and Uploading the Firmware</a></p></li>
<li><p><a class="reference internal" href="#debugging-the-firmware" id="id4">Debugging the Firmware</a></p></li>
<li><p><a class="reference internal" href="#writing-unit-tests" id="id5">Writing Unit Tests</a></p></li>
<li><p><a class="reference internal" href="#adding-bluetooth-le-features" id="id6">Adding Bluetooth LE features</a></p></li>
<li><p><a class="reference internal" href="#conclusion" id="id7">Conclusion</a></p></li>
</ul>
</nav>
<section id="setting-up-the-project">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Setting Up the Project</a><a class="headerlink" href="#setting-up-the-project" title="Link to this heading"></a></h2>
<p>At first step, we need to create a new project using PlatformIO Home Page (to open this page just press Home icon on the toolbar):</p>
<img alt="../../_images/arduino-debugging-unit-testing-17.png" src="../../_images/arduino-debugging-unit-testing-17.png" />
<p>On the next step we need to select <code class="docutils literal notranslate"><span class="pre">Nordic</span> <span class="pre">nRF52-DK</span></code> as a development board, <a class="reference internal" href="../../frameworks/arduino.html#framework-arduino"><span class="std std-ref">Arduino</span></a> as a framework and a path to the project location (or use the default one):</p>
<img alt="../../_images/arduino-debugging-unit-testing-21.png" src="../../_images/arduino-debugging-unit-testing-21.png" />
<p>Processing the selected project may take some amount of time (PlatformIO will download and install all required packages)
and after these steps, we have a fully configured project that is ready for developing code with <a class="reference internal" href="../../frameworks/arduino.html#framework-arduino"><span class="std std-ref">Arduino</span></a> framework.</p>
</section>
<section id="adding-code-to-the-generated-project">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Adding Code to the Generated Project</a><a class="headerlink" href="#adding-code-to-the-generated-project" title="Link to this heading"></a></h2>
<p>Let’s add some actual code to the project. Firstly, we open a default main file <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> in the <a class="reference internal" href="../../projectconf/sections/platformio/options/directory/src_dir.html#projectconf-pio-src-dir"><span class="std std-ref">src_dir</span></a> folder and replace its contents with the following:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Arduino.h&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span>
<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span>
<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<img alt="../../_images/arduino-debugging-unit-testing-31.png" src="../../_images/arduino-debugging-unit-testing-31.png" />
<p>After this step, we created a basic blink project ready for compiling and uploading.</p>
</section>
<section id="compiling-and-uploading-the-firmware">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Compiling and Uploading the Firmware</a><a class="headerlink" href="#compiling-and-uploading-the-firmware" title="Link to this heading"></a></h2>
<p>Now we can build the project. To compile firmware we can use next options:
Build option from the <code class="docutils literal notranslate"><span class="pre">Project</span> <span class="pre">Tasks</span></code> menu, Build button in <a class="reference internal" href="../../integration/ide/vscode.html#ide-vscode-toolbar"><span class="std std-ref">PlatformIO Toolbar</span></a>, Task Menu <code class="docutils literal notranslate"><span class="pre">Tasks:</span> <span class="pre">Run</span> <span class="pre">Task...</span> <span class="pre">&gt;</span> <span class="pre">PlatformIO:</span> <span class="pre">Build</span></code> or in <a class="reference internal" href="../../integration/ide/vscode.html#ide-vscode-toolbar"><span class="std std-ref">PlatformIO Toolbar</span></a>, Command Palette <code class="docutils literal notranslate"><span class="pre">View:</span> <span class="pre">Command</span> <span class="pre">Palette</span> <span class="pre">&gt;</span> <span class="pre">PlatformIO:</span> <span class="pre">Build</span></code> or via hotkeys <code class="docutils literal notranslate"><span class="pre">cmd-alt-b</span> <span class="pre">/</span> <span class="pre">ctrl-alt-b</span></code>:</p>
<img alt="../../_images/arduino-debugging-unit-testing-41.png" src="../../_images/arduino-debugging-unit-testing-41.png" />
<p>If everything went well, we should see a successful result message in the terminal window:</p>
<img alt="../../_images/arduino-debugging-unit-testing-51.png" src="../../_images/arduino-debugging-unit-testing-51.png" />
<p>To upload the firmware to the board we can use next options:
Upload option from the <code class="docutils literal notranslate"><span class="pre">Project</span> <span class="pre">Tasks</span></code> menu, Upload button in <a class="reference internal" href="../../integration/ide/vscode.html#ide-vscode-toolbar"><span class="std std-ref">PlatformIO Toolbar</span></a>, Command Palette <code class="docutils literal notranslate"><span class="pre">View:</span> <span class="pre">Command</span> <span class="pre">Palette</span> <span class="pre">&gt;</span> <span class="pre">PlatformIO:</span> <span class="pre">Upload</span></code>, using Task Menu <code class="docutils literal notranslate"><span class="pre">Tasks:</span> <span class="pre">Run</span> <span class="pre">Task...</span> <span class="pre">&gt;</span> <span class="pre">PlatformIO:</span> <span class="pre">Upload</span></code> or via hotkeys <code class="docutils literal notranslate"><span class="pre">cmd-alt-u</span> <span class="pre">/</span> <span class="pre">ctrl-alt-u</span></code>:</p>
<img alt="../../_images/arduino-debugging-unit-testing-61.png" src="../../_images/arduino-debugging-unit-testing-61.png" />
<p>After successful uploading, the green LED1 should start blinking.</p>
</section>
<section id="debugging-the-firmware">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Debugging the Firmware</a><a class="headerlink" href="#debugging-the-firmware" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../plus/debugging.html#piodebug"><span class="std std-ref">Debugging</span></a> offers the easiest way to debug the board. Firstly, we need to specify <a class="reference internal" href="../../projectconf/sections/env/options/debug/debug_tool.html#projectconf-debug-tool"><span class="std std-ref">debug_tool</span></a> in <a class="reference internal" href="../../projectconf/index.html#projectconf"><span class="std std-ref">“platformio.ini” (Project Configuration File)</span></a>. Since the board has an on-board <code class="docutils literal notranslate"><span class="pre">JLink</span></code> debug probe we can directly declare it in <a class="reference internal" href="../../projectconf/index.html#projectconf"><span class="std std-ref">“platformio.ini” (Project Configuration File)</span></a>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[env:nrf52_dk]</span>
<span class="na">platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">nordicnrf52</span>
<span class="na">board</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">nrf52_dk</span>
<span class="na">framework</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">arduino</span>
<span class="na">debug_tool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">jlink</span>
</pre></div>
</div>
<p>To start the debug session we can use next options:
<code class="docutils literal notranslate"><span class="pre">Debug:</span> <span class="pre">Start</span> <span class="pre">debugging</span></code> from the top menu, <code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">Debugging</span></code> option from Quick Access menu or hotkey button <code class="docutils literal notranslate"><span class="pre">F5</span></code>:</p>
<img alt="../../_images/arduino-debugging-unit-testing-71.png" src="../../_images/arduino-debugging-unit-testing-71.png" />
<p>We need to wait some time while PlatformIO is initializing the debug session and when the first line after the main function is highlighted we are ready to debug:</p>
<img alt="../../_images/arduino-debugging-unit-testing-81.png" src="../../_images/arduino-debugging-unit-testing-81.png" />
<p>We can walk through the code using control buttons, set breakpoints, add variables to <code class="docutils literal notranslate"><span class="pre">Watch</span> <span class="pre">window</span></code>:</p>
<img alt="../../_images/arduino-debugging-unit-testing-91.png" src="../../_images/arduino-debugging-unit-testing-91.png" />
</section>
<section id="writing-unit-tests">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Writing Unit Tests</a><a class="headerlink" href="#writing-unit-tests" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../advanced/unit-testing/index.html#unit-testing"><span class="std std-ref">Unit Testing</span></a> test cases can be added to a single file that may include multiple tests. First of all, in this file, we need to add four default functions: <code class="docutils literal notranslate"><span class="pre">setUp</span></code>, <code class="docutils literal notranslate"><span class="pre">tearDown</span></code>, <code class="docutils literal notranslate"><span class="pre">setup</span></code> and <code class="docutils literal notranslate"><span class="pre">loop</span></code>. Functions <code class="docutils literal notranslate"><span class="pre">setUp</span></code> and <code class="docutils literal notranslate"><span class="pre">tearDown</span></code> are used to initialize and finalize test conditions. Implementations of these functions are not required for running tests but if you need to initialize some variables before you run a test, you use the <code class="docutils literal notranslate"><span class="pre">setUp</span></code> function and if you need to clean up variables you use <code class="docutils literal notranslate"><span class="pre">tearDown</span></code> function. In our example we will use these functions to accordingly initialize and deinitialize LED.  <code class="docutils literal notranslate"><span class="pre">setup</span></code> and <code class="docutils literal notranslate"><span class="pre">loop</span></code> functions act as a simple Arduino program where we describe our test plan.</p>
<p>Let’s create <code class="docutils literal notranslate"><span class="pre">test</span></code> folder in the root of the project and add a new file <code class="docutils literal notranslate"><span class="pre">test_main.cpp</span></code> to this folder. Next basic tests for <code class="docutils literal notranslate"><span class="pre">String</span></code> class will be implemented in this file:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">test_string_concat</span></code> tests the concatenation of two strings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_string_substring</span></code> tests the correctness of the substring extraction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_string_index_of</span></code> ensures that the string returns the correct index of the specified symbol</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_string_equal_ignore_case</span></code> tests case-insensitive comparison of two strings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_string_to_upper_case</span></code> tests upper-case conversion of the string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_string_replace</span></code> tests the correctness of the replacing operation</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>2 sec delay is required since the board doesn’t support software resetting via <code class="docutils literal notranslate"><span class="pre">Serial.DTR/RTS</span></code></p></li>
</ul>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Arduino.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unity.h&gt;</span>

<span class="n">String</span><span class="w"> </span><span class="n">STR_TO_TEST</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="c1">// set stuff up here</span>
<span class="w">  </span><span class="n">STR_TO_TEST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, world!&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="c1">// clean stuff up here</span>
<span class="w">  </span><span class="n">STR_TO_TEST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_string_concat</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, &quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;world!&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">TEST_ASSERT_EQUAL_STRING</span><span class="p">(</span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="n">hello</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">world</span><span class="p">).</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_string_substring</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">TEST_ASSERT_EQUAL_STRING</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">).</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_string_index_of</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">TEST_ASSERT_EQUAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">indexOf</span><span class="p">(</span><span class="sc">&#39;w&#39;</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_string_equal_ignore_case</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">TEST_ASSERT_TRUE</span><span class="p">(</span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">equalsIgnoreCase</span><span class="p">(</span><span class="s">&quot;HELLO, WORLD!&quot;</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_string_to_upper_case</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">toUpperCase</span><span class="p">();</span>
<span class="w">  </span><span class="n">TEST_ASSERT_EQUAL_STRING</span><span class="p">(</span><span class="s">&quot;HELLO, WORLD!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_string_replace</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="sc">&#39;!&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;?&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="n">TEST_ASSERT_EQUAL_STRING</span><span class="p">(</span><span class="s">&quot;Hello, world?&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">STR_TO_TEST</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span><span class="w"> </span><span class="c1">// service delay</span>
<span class="w">  </span><span class="n">UNITY_BEGIN</span><span class="p">();</span>

<span class="w">  </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_string_concat</span><span class="p">);</span>
<span class="w">  </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_string_substring</span><span class="p">);</span>
<span class="w">  </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_string_index_of</span><span class="p">);</span>
<span class="w">  </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_string_equal_ignore_case</span><span class="p">);</span>
<span class="w">  </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_string_to_upper_case</span><span class="p">);</span>
<span class="w">  </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_string_replace</span><span class="p">);</span>

<span class="w">  </span><span class="n">UNITY_END</span><span class="p">();</span><span class="w"> </span><span class="c1">// stop unit testing</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we are ready to upload tests to the board. To do this we can use next options:
Test button on <a class="reference internal" href="../../integration/ide/vscode.html#ide-vscode-toolbar"><span class="std std-ref">PlatformIO Toolbar</span></a>, Test option from the <code class="docutils literal notranslate"><span class="pre">Project</span> <span class="pre">Tasks</span></code> menu or <code class="docutils literal notranslate"><span class="pre">Tasks:</span> <span class="pre">Run</span> <span class="pre">Task...</span> <span class="pre">&gt;</span> <span class="pre">PlatformIO</span> <span class="pre">Test</span></code> from the top menu:</p>
<img alt="../../_images/arduino-debugging-unit-testing-101.png" src="../../_images/arduino-debugging-unit-testing-101.png" />
<p>After processing we should see a detailed report about the testing results:</p>
<img alt="../../_images/arduino-debugging-unit-testing-111.png" src="../../_images/arduino-debugging-unit-testing-111.png" />
<p>As we can see from the report, all our tests were successful!</p>
</section>
<section id="adding-bluetooth-le-features">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Adding Bluetooth LE features</a><a class="headerlink" href="#adding-bluetooth-le-features" title="Link to this heading"></a></h2>
<p>To add the basic BLE functionality to our project we need to define the SoftDevice version
and install a library called <a class="reference external" href="https://platformio.org/lib/show/259/BLEPeripheral">BLEPeripheral</a>.
Both these modifications can be specified in <a class="reference internal" href="../../projectconf/index.html#projectconf"><span class="std std-ref">“platformio.ini” (Project Configuration File)</span></a>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[env:nrf52_dk]</span>
<span class="na">platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">nordicnrf52</span>
<span class="na">board</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">nrf52_dk</span>
<span class="na">framework</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">arduino</span>
<span class="na">debug_tool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">jlink</span>
<span class="c1">; SoftDevice version</span>
<span class="na">build_flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-DNRF52_S132</span>
<span class="na">lib_deps</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">BLEPeripheral</span>
</pre></div>
</div>
<p>Now let’s create a basic application that can interact with other BLE devices (e.g phone)
For example, next code declares a BLE characteristic that controls the state of the LED1.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Arduino.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SPI.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;BLEPeripheral.h&gt;</span>

<span class="n">BLEPeripheral</span><span class="w"> </span><span class="n">ledPeripheral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLEPeripheral</span><span class="p">();</span>

<span class="n">BLEService</span><span class="w"> </span><span class="n">ledService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLEService</span><span class="p">(</span><span class="s">&quot;19b10000e8f2537e4f6cd104768a1214&quot;</span><span class="p">);</span>
<span class="n">BLECharCharacteristic</span><span class="w"> </span><span class="n">ledCharacteristic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLECharCharacteristic</span><span class="p">(</span><span class="s">&quot;19b10001e8f2537e4f6cd104768a1214&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">BLERead</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">BLEWrite</span><span class="p">);</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span>

<span class="w">  </span><span class="n">ledPeripheral</span><span class="p">.</span><span class="n">setAdvertisedServiceUuid</span><span class="p">(</span><span class="n">ledService</span><span class="p">.</span><span class="n">uuid</span><span class="p">());</span>
<span class="w">  </span><span class="n">ledPeripheral</span><span class="p">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="n">ledService</span><span class="p">);</span>
<span class="w">  </span><span class="n">ledPeripheral</span><span class="p">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="n">ledCharacteristic</span><span class="p">);</span>
<span class="w">  </span><span class="n">ledPeripheral</span><span class="p">.</span><span class="n">setLocalName</span><span class="p">(</span><span class="s">&quot;Nordic NRF52 DK&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">ledPeripheral</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">BLECentral</span><span class="w"> </span><span class="n">central</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ledPeripheral</span><span class="p">.</span><span class="n">central</span><span class="p">();</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">central</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">central</span><span class="p">.</span><span class="n">connected</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ledCharacteristic</span><span class="p">.</span><span class="n">written</span><span class="p">())</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ledCharacteristic</span><span class="p">.</span><span class="n">value</span><span class="p">())</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we can compile and upload this program to the board as described in previous sections.
To verify that our application works as expected, we can use any Android smartphone with BLE feature and
<a class="reference external" href="https://play.google.com/store/apps/details?id=no.nordicsemi.android.mcp&amp;hl=en">Nordic nRF Connect tool</a>.</p>
<p>At first, we need to scan all advertising BLE devices and connect to the device called <code class="docutils literal notranslate"><span class="pre">Nordic</span> <span class="pre">NRF52</span> <span class="pre">DK</span></code>.
After a successful connection to the board, we should see one “Unknown Service” with one “Unknown Characteristic” fields:</p>
<img alt="../../_images/arduino-debugging-unit-testing-121.png" src="../../_images/arduino-debugging-unit-testing-121.png" />
<p>To switch the LED on or off we just need write <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code> as <code class="docutils literal notranslate"><span class="pre">UINT8</span></code> to the BLE characteristic:</p>
<img alt="../../_images/arduino-debugging-unit-testing-131.png" src="../../_images/arduino-debugging-unit-testing-131.png" />
</section>
<section id="conclusion">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Conclusion</a><a class="headerlink" href="#conclusion" title="Link to this heading"></a></h2>
<p>Now we have a project template for Nordic <code class="docutils literal notranslate"><span class="pre">nRF52-DK</span></code> board that we can use as a boilerplate for the next projects.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ststm32/stm32cube_debugging_unit_testing.html" class="btn btn-neutral float-left" title="STM32Cube HAL and Nucleo-F401RE: debugging and unit testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="zephyr_debugging_unit_testing_inspect.html" class="btn btn-neutral float-right" title="Zephyr and Nordic nRF52-DK: debugging, unit testing, project analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">

    <p>&#169; Copyright 2014-present, PlatformIO.</p>
<ins data-rvad-zoneid="8" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>

  </div>

  
 
<script>
  var navBarHTML = '\
<div>\
  <div class="container container-fluid">\
    <div class="navbar-header">\
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navBarCollapse" aria-expanded="false">\
        <span class="sr-only">Toggle navigation</span>\
        <span class="icon-bar"></span>\
        <span class="icon-bar"></span>\
        <span class="icon-bar"></span>\
      </button>\
      <a class="navbar-brand" href="https://platformio.org" title="PlatformIO"></a>\
    </div>\
    <nav role="navigation" class="collapse navbar-collapse" id="navBarCollapse">\
      <div>\
        <ul class="nav navbar-nav">\
          <li class="dropdown">\
            <a role="button" data-target="#" href="https://platformio.org/platformio-ide" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Get Started<span class="caret"></span>\
            </a>\
            <ul class="dropdown-menu" role="menu">\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/what-is-platformio.html"><i class="fa fa-heart"></i>What is PlatformIO?</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://platformio.org/platformio-ide"><i class="fa fa-cube"></i>PlatformIO IDE</a></li>\
              <li role="menuitem"><a href="https://platformio.org/install/cli"><i class="fa fa-cogs"></i>PlatformIO Core (CLI)</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/librarymanager/index.html"><i class="fa fa-code"></i>Library Management</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/tutorials/index.html" target="_blank"><i class="fa fa-graduation-cap"></i>Tutorials</a></li>\
              <li role="menuitem"><a href="https://github.com/platformio/platformio-examples" target="_blank"><i class="fa fa-graduation-cap"></i>Project Examples</a></li>\
            </ul>\
          </li>\
          <li class="dropdown">\
            <a role="button" data-target="#" href="https://docs.platformio.org/en/latest/plus/pio-remote.html" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Solutions<span class="caret"></span>\
            </a>\
            <ul class="dropdown-menu" role="menu">\
              <li role="menuitem"><a href="https://platformio.org/platformio-ide"><i class="fa fa-cube"></i>PlatformIO IDE</a></li>\
              <li role="menuitem"><a href="https://platformio.org/install/cli"><i class="fa fa-cogs"></i>PlatformIO Core (CLI)</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/plus/debugging.html"><i class="fa fa-bug"></i>Debugging</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/advanced/unit-testing/index.html"><i class="fa fa-puzzle-piece"></i>Unit Testing</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/plus/pio-check.html"><i class="fa fa-check-circle-o"></i>Static Code Analysis</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/plus/pio-remote.html"><i class="fa fa-globe"></i>Remote Development</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/librarymanager/index.html"><i class="fa fa-code"></i>Library Management</a></li>\
              <li role="separator" class="divider"></li>\
              <li role="menuitem"><a href="https://platformio.org/install/integration"><i class="fa fa-cube"></i>Desktop IDEs Integration</a></li>\
              <li role="menuitem"><a href="https://platformio.org/install/integration"><i class="fa fa-cloud"></i>Cloud IDEs Integration</a></li>\
              <li role="menuitem"><a href="https://docs.platformio.org/en/latest/ci/index.html"><i class="fa fa-refresh"></i>Continuous Integration</a></li>\
            </ul>\
          </li>\
          <li><a href="https://registry.platformio.org/">Registry</a></li>\
        </ul>\
        <ul class="nav navbar-nav navbar-right">\
          <li class="active"><a href="https://docs.platformio.org">Docs</a></li>\
          <li><a href="https://community.platformio.org/">Community</a></li>\
          <li><a href="https://platformio.org/support">Support</a></li>\
          <li class="nav-pio-tech"><a href="https://piolabs.com/"><i class="fa fa-rocket fa-lg"></i> TECHNOLOGY</a></li>\
        </ul>\
      </div>\
    </nav>\
  </div>\
</div>';

  (function() {
    if (window.location.href.indexOf('http://') === 0) {
      location.href = 'https:' + window.location.href.substring(5);
    }

    var topBanner = jQuery('.top-banner');
    var navBar = document.createElement('header');
    navBar.className = 'navbar navbar-inverse';
    navBar.innerHTML = navBarHTML;
    if (topBanner.length) {
      jQuery(navBar).insertAfter(topBanner)
    } else {
      document.body.insertBefore(navBar, document.body.firstChild);
    }

    if (jQuery(window).width() <= 768) {
      return;
    }

    var topOffset = 50;
    if (topBanner.length) {
      topOffset += jQuery('.navbar').offset().top;
    }
    jQuery('.wy-nav-side').css('top', topOffset + 'px');
    jQuery(window).scroll(function() {
      jQuery('.wy-nav-side').css('top', jQuery(window).scrollTop() > topOffset ? 0 : topOffset + 'px');
    });
  })();
</script>
<ins data-rvad-zoneid="11" data-rvad-id="f837d8c96893e793fdbb230cffb628fc"></ins>
<script async src="https://ad.platformio.org/delivery/revasyncjs.dll"></script>


</footer>
        </div>

      </div>
    </section>
  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation</span>
    v6.1.19a1 (latest)
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="/en/">latest</a></dd>
      
        <dd><a href="/en/stable/">stable</a></dd>
      
    </dl>
    <dl>
      <dt>On Github</dt>
        <dd><a href="https://github.com/platformio/platformio-docs/blob/develop/tutorials/nordicnrf52/arduino_debugging_unit_testing.rst"> View</a></dd>
        <dd><a href="https://github.com/platformio/platformio-docs/edit/develop/tutorials/nordicnrf52/arduino_debugging_unit_testing.rst"> Edit</a></dd>
    </dl>
    <dl>
      <dt>Search</dt>
        <dd>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>